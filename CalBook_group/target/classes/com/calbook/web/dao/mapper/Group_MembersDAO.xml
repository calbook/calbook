<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.calbook.web.dao.Group_MembersDAO">
	
	<!-- 그룹 생성중 멤버추가 -->
	<insert id="addGroupMember">
		INSERT INTO GROUP_MEMBERS VALUES (#{param1}, #{param2}, null, 0)
	</insert>
	
	<!-- 그룹생성중 멤버추가중 친구리스트 불러오기  ajax -->
	
	<select id="getGroupFriendsList">
		SELECT * FROM ((SELECT * FROM FRIENDS F INNER JOIN MEMBERS M ON F.F_EMAIL=M.EMAIL INNER JOIN GROUP_MEMBERS GM ON F.F_EMAIL=GM.M_EMAIL WHERE RELATION=1 AND F.M_EMAIL=#{email}) UNION (SELECT * FROM FRIENDS F INNER JOIN MEMBERS M ON F.M_EMAIL=M.EMAIL INNER JOIN GROUP_MEMBERS GM ON F.M_EMAIL=GM.M_EMAIL WHERE RELATION=1 AND F.F_EMAIL=#{email})) ORDER BY NICK;	
	</select>
	
</mapper>
